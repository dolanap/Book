# 1.5 스프링의  IOC

빈 팩토리 (= 애플리케이션 컨텍스트) 에 대하여 알아보자

## 1. 오브젝트 팩토리를 이용한 스프링 IOC

### 애플리케이션 컨텍스트와 설정정보

**`스프링 빈(bean)`** :

- 스프링이 제어권을 가지며 직접 만들고 관계를 부여하는 오브젝트 단위의 애플리케이션 컴포넌트
- 스프링 컨테이너가 생성, 관계설정, 사용 등을 제어해주는 제어의 역전이 적용된 오브젝트

책에서 설명하는 빈 팩토리와 애플리케이션 컨텍스트는 동일하다고 봐도 되며, 다음과 같은 의미가 좀 더 부각된다.

`빈 팩토리`

: 빈의 생성과 관계설정 같은 제어를 담당하는 **IoC 오브젝트, IoC의 기본 기능**에 초점을 맞춤

`애플리케이션 컨텍스트`

: 빈 팩토리를 조금 더 확장한 개념으로, 애플리케이션 전반에 걸쳐 **모든 구성요소의 제어 작업을 담당하는 IoC 엔진**이라는 의미가 부각됨

### DaoFactory를 사용하는 애플리케이션 컨텍스트

1. `@Configuration`이라는 애노테이션을 클래스에 붙이면, 해당 클래스가 `빈 팩토리`를 위한 오브젝트 설정을 담당하는 클래스라고 알릴 수 있다.
2. `@Bean`이라는 애노테이션을 객체 생성 메소드에 붙이면, 해당 메소드가 생성한 객체를 `스프링 빈`으로서 활용할 수 있다.
- userDao()에도 @Bean이 붙는다

## 2. 애플리케이션 컨텍스트의 동장방식

기존 `오브젝트 팩토리`에 대응되는 것이 스프링의 `애플리케이션 컨텍스트`이다

(Ioc컨테이너, 스프링 컨테이너, 빈 팩토리 모두 같은 의미.. 애플리케이션 컨텍스트 자체를 스프링이라고 부르는 사람도 있다고 한다)

`DaoFactory`는 `DAO` 오브젝트를 생성하고, `DAO`와 `ConnectionMaker` 구현체 간의 관계를 맺어주는 제한적인 역할을 하는 반면,

애플리케이션 컨텍스트는 애플리케이션에서 IoC를 적용해 관리할 모든 오브젝트에 대한 생성과 관계 설정을 담당한다.

단, **애플리케이션 컨텍스트는 직접 관계를 맺어주는 코드는 없고, 생성정보와 연관관계 정보는 별도의 설정정보를 통해 얻는다.**
 때로는 외부 오브젝트 팩토리에 그 작업을 위임하고 그 결과를 가져다가 사용한다.

`@Configuration` 애노테이션이 붙은 클래스는 스프링 프레임워크(IoC)의 설정정보를 제공한다.

`@Bean` 애노테이션이 붙은 생성 메소드는 스프링 프레임워크에 스프링 빈을 제공한다.

### 애플리케이션 컨텍스트 사용의 이점

- 클라이언트는 구체적인 팩토리 클래스를 알 필요가 없다.
- 애플리케이션 컨텍스트는 종합 IoC 서비스를 제공해준다.
- 애플리케이션 컨텍스트는 빈을 검색하는 다양한 방법을 제공해준다.

## 3. 스프링 IoC의 용어 정리

**빈 (Bean)**

- 스프링이 IoC 방식으로 관리하여 직접 그 생성과 제어를 담당하는 오브젝트
- `주의` 스프링 애플리케이션에서 만들어지는 모든 오브젝트가 다 빈은 XX

**빈 팩토리 (Bean Factory)**

- 스프링 IoC를 담당하는 핵심 컨테이너
- 빈 등록, 생성, 조회, 반환 외에 부가적인 빈 관리 기능을 담당한다.
- 보통 빈 팩토리를 바로 이용하지 않고 이를 확장한 애플리케이션 컨텍스트를 이용한다.
- `BeanFactory`에는 `getBean()`과 같은 메소드가 정의되어 있다.

**애플리케이션 컨텍스트 (Application Context)**

- 빈 팩토리를 확장한 IoC 컨테이너
- 빈을 등록하고 관리하는 기본적인 기능 외에 스프링이 제공하는 각종 부가 서비스를 추가로 제공한다.
- 스프링에서는 애플리케이션 컨텍스트라는 용어를 빈 팩토리보다 더 많이 사용한다.
- `ApplicationContext`는 애플리케이션 컨텍스트가 구현하는 기본 인터페이스를 가리킨다.
- 빈 팩토리는 빈의 생성과 제어 관점에서 쓰는 용어이고, 애플리케이션 컨텍스트는 스프링이 제공하는 애플리케이션 지원 기능을 모두 포함해서 이야기하는 용어이다.

**설정정보/설정 메타정보 (Configuration Metadata)**

- 애플리케이션 컨텍스트 혹은 빈 팩토리가 IoC를 적용하기 위해 사용하는 메타정보

**컨테이너 (Container) 혹은 IoC 컨테이너**

- 애플리케이션 컨텍스트나 빈 팩토리와 같은 의미

**스프링 프레임워크**

- IoC 컨테이너, 애플리케이션 컨텍스트를 포함해서 스프링이 제공하는 모든 기능을 통틀어 말할 때 사용한다. 그냥 스프링이라고 말하기도 한다.
